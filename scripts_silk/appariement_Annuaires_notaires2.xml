<Silk>
<!--Prefixes-->
    <Prefixes>
      <Prefix id="rdf" namespace="http://www.w3.org/1999/02/22-rdf-syntax-ns#"/>
	  <Prefix id="owl" namespace="http://www.w3.org/2002/07/owl#"/>
	  <Prefix id="adb" namespace="http://rdf.geohistoricaldata.org/def/directory#"/>
	  <Prefix id="rdfs" namespace="http://www.w3.org/2000/01/rdf-schema#"/>
	  <Prefix id="locn" namespace="http://www.w3.org/ns/locn#"/>
	  <Prefix id="xsd" namespace="http://www.w3.org/2001/XMLSchema#"/>
	  <Prefix id="dcterms" namespace="http://purl.org/dc/terms/"/>
	  <Prefix id="rda" namespace="http://rdaregistry.info/Elements/a/"/>
    </Prefixes>
	<!--Datasets-->
	<DataSources>
	  <DataSource id="dataset1" type="sparqlEndpoint"><!--Nom du premier dataset à apparier-->
		  <Param name="pageSize" value="1000"></Param>
		  <Param name="pauseTime" value="0"></Param>
		  <Param name="retryCount" value="3"></Param>
		  <Param name="endpointURI" value="http://localhost:7200/repositories/photographes_atelier"></Param><!--Mettre l'adresse du répertoire GraphDB où se trouvent les données des annuaires-->
		  <Param name="graph" value=""></Param><!--Mettre l'URI du graphe nommé où se trouvent les données sur lesquelles on travaille-->
		  <Param name="retryPause" value="1000"></Param>
		  <Param name="queryParameters" value=""/>
		  <Param name="login" value=""/>
		  <Param name="entityList" value=""/>
		  <Param name="parallel" value="true"/>
		  <Param name="password" value=""/>
	  </DataSource>
	  <DataSource id="dataset2" type="sparqlEndpoint"><!--Nom du second dataset à apparier-->
		  <Param name="pageSize" value="1000"></Param>
		  <Param name="pauseTime" value="0"></Param>
		  <Param name="retryCount" value="3"></Param>
		  <Param name="endpointURI" value="http://localhost:7200/repositories/photographes_atelier"></Param><!--Mettre l'adresse du répertoire GraphDB où se trouvent les données des annuaires-->
		  <Param name="graph" value=""></Param><!--Mettre l'URI du graphe nommé où se trouvent les données sur lesquelles on travaille-->
		  <Param name="retryPause" value="1000"></Param>
		  <Param name="queryParameters" value=""/>
		  <Param name="login" value=""/>
		  <Param name="entityList" value=""/>
		  <Param name="parallel" value="true"/>
		  <Param name="password" value=""/>
	  </DataSource>
	</DataSources>
<!--Links-->
<Interlinks>
	<Interlink id="by-keys">
		<LinkType>owl:sameAs</LinkType>
			<SourceDataset dataSource="dataset1" var="a">
				<RestrictTo>{ ?a rdf:type adb:Entry } .</RestrictTo>
			</SourceDataset>
			<TargetDataset dataSource="dataset2" var="b">
				<RestrictTo>{ ?b rdf:type adb:Entry } .</RestrictTo>
			</TargetDataset>
<LinkageRule>
		<!--Max score between entry index and by keys comparisons-->
			<Aggregate id="min_activity_add" required="true"  weight="1" type="min">
				<Compare id="levenstein_label" metric="levenshtein"  threshold="0.5"> <!-- Levenshtein -->
					<TransformInput id="regexReplace_1" function="regexReplace">
						<TransformInput id="lowerCase1" function="lowerCase">
							<Input id="label1" path="?a/rdfs:label"/>
						</TransformInput>
						<Param name="regex" value="[\[,.\-_\(\)\]?!':;$]"/>
						<Param name="replace" value=""/>
					</TransformInput>
					<TransformInput id="regexReplace_2" function="regexReplace">
						<TransformInput id="lowerCase2" function="lowerCase">
							<Input id="label2" path="?b/rdfs:label"/>
						</TransformInput>
						<Param name="regex" value="[\[,.\-_\(\)\]?!':;$]"/>
						<Param name="replace" value=""/>
					</TransformInput>
				</Compare>

				<Compare id="levenstein_activite"  metric="levenshtein"  threshold="0.6"> <!-- Levenshtein activité-->
					<TransformInput id="regexReplace_3" function="regexReplace">
						<TransformInput id="lowerCase3" function="lowerCase">
							<Input id="activite1" path="?a/rda:P50104"/>
						</TransformInput>
						<Param name="regex" value="[\[,.\-_\(\)\]?!':;$]"/>
						<Param name="replace" value=""/>
					</TransformInput>


					<TransformInput id="regexReplace_4" function="regexReplace">
						<TransformInput id="lowerCase4" function="lowerCase">
							<Input id="activite2" path="?b/rda:P50104"/>
						</TransformInput>
						<Param name="regex" value="[\[,.\-_\(\)\]?!':;$]"/>
						<Param name="replace" value=""/>
					</TransformInput>
				</Compare>
			</Aggregate>
</LinkageRule>
<Filter limit="150"/>
<Outputs>
<Output type="file" minConfidence="0.81">
<!--
Fichier RDF où sont sauvegardés les liens sameAS "sûrs" pour lesquels la confiance est supérieure ou égale à 0.8
-->
<Param name="file" value="labelactivity_accepted_links_mehdi.nt"/>
<Param name="format" value="ntriples"/>
</Output>
<Output type="file" minConfidence="0.7" maxConfidence="0.8">
<!--
Fichier RDF où sont sauvegardés les liens sameAS "à vérifier" pour lesquels la confiance est comprise entre 0.71 et 0.8
-->
<Param name="file" value="labelactivity_verify_links_mehdi.nt"/>
<Param name="format" value="ntriples"/>
</Output>
</Outputs>
</Interlink>
</Interlinks>
</Silk>